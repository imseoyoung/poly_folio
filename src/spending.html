---
layout: base
---
<style>
    #receipt_img_div {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #receipt_img_div img {
        margin-bottom: 10px;
    }
</style>
<div class="spending_main">
    <div class="spending_chart_div">
        <div class="btn_div">
            <button onclick="prevSlide()"></button>
            <h1>GBP</h1>
            <button onclick="nextSlide()"></button>
        </div>
        <br>
        <canvas id="myPieChart"></canvas>
        <br>
        <h4>총 지출내역은 <span class="green_text">908,216원</span></h4>
        <br>
        <div id="receipt_img_div"></div>
    </div>
</div>

<!-- 부트스트랩 -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
<!-- 차트 -->
<script>
    // JSON 파일 로드
    fetch("json/payment_data.json")
        .then((response) => response.json())
        .then((data) => {
            // 결제내역 데이터 가져오기
            const paymentData = data.paymentData;

            // 차트 데이터 설정
            const chartData = {
                datasets: [{
                    backgroundColor: ['rgba(255, 99, 132, 0.2)','rgba(54, 162, 235, 0.2)','rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2', 'rgba(153, 102, 255, 0.2)'],
                    data: paymentData.map(item => item.amount)
                }],       
                labels: paymentData.map(item => item.category)
            };

            // 가운데 구멍이 없는 파이형 차트
            var ctx1 = document.getElementById("myPieChart");
            var myPieChart = new Chart(ctx1, {
                type: 'pie',
                data: chartData,
                options: {}
            });

            // 결제내역 이미지 추가
            const receiptImgDiv = document.getElementById("receipt_img_div");
            paymentData.forEach(item => {
                const img = document.createElement("img");
                img.src = item.receiptImage;
                img.width = "380";
                receiptImgDiv.appendChild(img);
            });
        })
        .catch((error) => {
            console.error("JSON 파일을 로드하는 중 오류가 발생했습니다:", error);
        });
</script>
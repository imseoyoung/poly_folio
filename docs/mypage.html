<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ddeoyoung</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="main.css">
    <!-- 차트 링크 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>
<body>
    <header>
        <!-- jQuery를 로드하기 위한 스크립트 태그 추가 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
    .footer_btns {
    display: flex;
    position: fixed;
    right: .4rem;
    bottom: .4rem;
    }

    .footer_btns > div {
    padding: .6rem 1.5rem;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border-radius: 5px;
    transition: .2s;
    color: #fff;
    margin-right: .4rem;
    }

    .moveTopBtn:hover {
    color: #000;
    background: #5CBCA9;
    }
    .moveBottomBtn:hover {
    color: #000;
    background: #5CBCA9;
    }

</style>
<!-- HTML 코드 -->
<nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
            <img src="./img/logo.png" width="190px" height="50">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="true" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/about.html" aria-current="page">서비스안내</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/hanamoney.html">하나머니분석</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/spending.html">소비내역분석</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/mylog.html">마이로그</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/mypage.html">마이페이지</a>
            </li>
        </ul>
        </div>
    </div>
    <div class="footer_btns">
        <div class="moveTopBtn">맨 위로</div>
        <div class="moveBottomBtn">맨 아래로</div>
    </div>
</nav>

<!-- JavaScript 코드 -->
<script>
$(document).ready(function() {
    // 현재 URL을 가져와서 활성화된 링크를 찾음
    var currentURL = window.location.href;

    $('.nav-link').each(function() {
        // 각 링크의 href 속성 값을 가져옴
        var linkURL = $(this).attr('href');

        // 현재 URL과 href 속성 값이 일치하는 경우 "active" 클래스를 추가함
        if (currentURL.indexOf(linkURL) !== -1) {
            $(this).addClass('active');
        }
    });
});

// 페이지 이동 버튼
const $topBtn = document.querySelector(".moveTopBtn");

// 버튼 클릭 시 맨 위로 이동
$topBtn.onclick = () => {
    window.scrollTo({ top: 0, behavior: "smooth" });  
}

const $bottomBtn = document.querySelector(".moveBottomBtn");

// 버튼 클릭 시 페이지 하단으로 이동
$bottomBtn.onclick = () => {
    window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
};
</script>
    </header>
    <div class="content">
        <div id="login_main">
    <h1 id="login_header">Login</h1>
    <p><span class="pink_text">이용자 비밀번호 5회 연속 오류시</span><br>
        이용자 아이디/비밀번호 로그인 이용이 제한됩니다.
    </p>
    <div id="login_error_msg_holder">
        <p id="login_error_msg">잘못된 아이디 또는<span id="error_msg_second_line">패스워드 입력입니다.</span></p>
    </div>
    <form id="login_form">
        <input type="text" name="username" id="username_field" class="login_form_field" placeholder="아이디 입력">
        <input type="password" name="password" id="password_field" class="login_form_field" placeholder="비밀번호 입력">
        <br>
        <input type="submit" value="로그인" id="login_form_submit">
    </form>
</div>

<script>
const loginForm = document.getElementById("login_form");
const loginButton = document.getElementById("login_form_submit");
const loginErrorMsg = document.getElementById("login_error_msg");
const errorSecondLine = document.getElementById("error_msg_second_line");

let errorCount = 0; // 비밀번호 오류 횟수를 저장할 변수

loginButton.addEventListener("click", (event) => {
    event.preventDefault();
    const username = loginForm.username.value;
    const password = loginForm.password.value;

    if (validateLoginForm(username, password)) {
        // JSON 파일 로드
        fetch("json/users.json")
        .then((response) => response.json())
        .then((data) => {
            const users = data.users;
            const user = users.find((user) => user.username === username && user.password === password);

            if (user) {
            // 로그인 성공
            alert("로그인 성공");
            location.reload();
            } else {
            // 잘못된 아이디 또는 비밀번호 입력
            errorCount++;
            if (errorCount === 5) {
                // 5회 연속 오류 시 접근 차단
                displayErrorMessage("접근이 차단되었습니다.");
                loginButton.disabled = true; // 로그인 버튼 비활성화
            } else {
                // 오류 메시지 표시
                displayErrorMessage("잘못된 아이디 또는 비밀번호 입력입니다.");
                errorSecondLine.innerText = "패스워드 입력입니다. (오류 횟수: " + errorCount + ")";
            }
            }
        })
        .catch((error) => {
            console.error("JSON 파일을 로드하는 중 오류가 발생했습니다.", error);
            displayErrorMessage("로그인에 실패했습니다. 나중에 다시 시도해주세요.");
        });
    } else {
        displayErrorMessage("아이디와 비밀번호를 모두 입력해주세요.");
    }
    });

function displayErrorMessage(message) {
loginErrorMsg.innerText = message;
loginErrorMsg.style.opacity = 1;
}

function validateLoginForm(username, password) {
return username.trim() !== "" && password.trim() !== "";
}

function isUsernameValid(username) {
const regex = /^[a-zA-Z0-9]+$/;
return regex.test(username);
}
</script>
    </div>
    <footer>
        <hr>
<p>
    <span>고객센터 1800-0000</span><br/>
    <span>평일 AM 09:00 ~ PM 18:00 </span><br/>
    <span>Copyright 2023. hana travel trace. All Rights Reserved.</span>
</p>
    </footer>
</body>
</html>